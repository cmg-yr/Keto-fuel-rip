"use strict";!function(e,t,n){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t||n)}(function(e){var t=function(t,n,a){var r={invalid:[],getCaret:function(){try{var e,n=0,a=t.get(0),o=document.selection,i=a.selectionStart;return o&&-1===navigator.appVersion.indexOf("MSIE 10")?(e=o.createRange(),e.moveStart("character",-r.val().length),n=e.text.length):(i||"0"===i)&&(n=i),n}catch(s){}},setCaret:function(e){try{if(t.is(":focus")){var n,a=t.get(0);a.setSelectionRange?(a.focus(),a.setSelectionRange(e,e)):(n=a.createTextRange(),n.collapse(!0),n.moveEnd("character",e),n.moveStart("character",e),n.select())}}catch(r){}},events:function(){t.on("keydown.mask",function(e){t.data("mask-keycode",e.keyCode||e.which)}).on(e.jMaskGlobals.useInput?"input.mask":"keyup.mask",r.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){t.keydown().keyup()},100)}).on("change.mask",function(){t.data("changed",!0)}).on("blur.mask",function(){i===r.val()||t.data("changed")||t.trigger("change"),t.data("changed",!1)}).on("blur.mask",function(){i=r.val()}).on("focus.mask",function(t){a.selectOnFocus===!0&&e(t.target).select()}).on("focusout.mask",function(){a.clearIfNotMatch&&!s.test(r.val())&&r.val("")})},getRegexMask:function(){for(var t,a,r,i,s,c,e=[],l=0;l<n.length;l++)t=o.translation[n.charAt(l)],t?(a=t.pattern.toString().replace(/.{1}$|^.{1}/g,""),r=t.optional,i=t.recursive,i?(e.push(n.charAt(l)),s={digit:n.charAt(l),pattern:a}):e.push(r||i?a+"?":a)):e.push(n.charAt(l).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return c=e.join(""),s&&(c=c.replace(new RegExp("("+s.digit+"(.*"+s.digit+")?)"),"($1)?").replace(new RegExp(s.digit,"g"),s.pattern)),new RegExp(c)},destroyEvents:function(){t.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(e){var r,n=t.is("input"),a=n?"val":"text";return arguments.length>0?(t[a]()!==e&&t[a](e),r=t):r=t[a](),r},getMCharsBeforeCount:function(e,t){for(var a=0,r=0,i=n.length;i>r&&e>r;r++)o.translation[n.charAt(r)]||(e=t?e+1:e,a++);return a},caretPos:function(e,t,a,i){var s=o.translation[n.charAt(Math.min(e-1,n.length-1))];return s?Math.min(e+a-t-i,a):r.caretPos(e+1,t,a,i)},behaviour:function(n){n=n||window.event,r.invalid=[];var a=t.data("mask-keycode");if(-1===e.inArray(a,o.byPassKeys)){var i=r.getCaret(),s=r.val(),c=s.length,l=r.getMasked(),u=l.length,d=r.getMCharsBeforeCount(u-1)-r.getMCharsBeforeCount(c-1),f=c>i;return r.val(l),f&&(8!==a&&46!==a&&(i=r.caretPos(i,c,u,d)),r.setCaret(i)),r.callbacks(n)}},getMasked:function(e,t){var p,w,i=[],s=void 0===t?r.val():t+"",c=0,l=n.length,u=0,d=s.length,f=1,m="push",g=-1;for(a.reverse?(m="unshift",f=-1,p=0,c=l-1,u=d-1,w=function(){return c>-1&&u>-1}):(p=l-1,w=function(){return l>c&&d>u});w();){var h=n.charAt(c),v=s.charAt(u),y=o.translation[h];y?(v.match(y.pattern)?(i[m](v),y.recursive&&(-1===g?g=c:c===p&&(c=g-f),p===g&&(c-=f)),c+=f):y.optional?(c+=f,u-=f):y.fallback?(i[m](y.fallback),c+=f,u-=f):r.invalid.push({p:u,v:v,e:y.pattern}),u+=f):(e||i[m](h),v===h&&(u+=f),c+=f)}var b=n.charAt(p);return l!==d+1||o.translation[b]||i.push(b),i.join("")},callbacks:function(e){var o=r.val(),s=o!==i,c=[o,e,t,a],l=function(e,t,n){"function"==typeof a[e]&&t&&a[e].apply(this,n)};l("onChange",s===!0,c),l("onKeyPress",s===!0,c),l("onComplete",o.length===n.length,c),l("onInvalid",r.invalid.length>0,[o,e,t,r.invalid,a])}};t=e(t);var s,o=this,i=r.val();n="function"==typeof n?n(r.val(),void 0,t,a):n,o.mask=n,o.options=a,o.remove=function(){var e=r.getCaret();return r.destroyEvents(),r.val(o.getCleanVal()),r.setCaret(e-r.getMCharsBeforeCount(e)),t},o.getCleanVal=function(){return r.getMasked(!0)},o.getMaskedVal=function(e){return r.getMasked(!1,e)},o.init=function(n){if(n=n||!1,a=a||{},o.clearIfNotMatch=e.jMaskGlobals.clearIfNotMatch,o.byPassKeys=e.jMaskGlobals.byPassKeys,o.translation=e.extend({},e.jMaskGlobals.translation,a.translation),o=e.extend(!0,{},o,a),s=r.getRegexMask(),n===!1){a.placeholder&&t.attr("placeholder",a.placeholder),t.data("mask")&&t.attr("autocomplete","off"),r.destroyEvents(),r.events();var i=r.getCaret();r.val(r.getMasked()),r.setCaret(i+r.getMCharsBeforeCount(i,!0))}else r.events(),r.val(r.getMasked())},o.init(!t.is("input"))};e.maskWatchers={};var n=function(){var n=e(this),r={},o="data-mask-",i=n.attr("data-mask");return n.attr(o+"reverse")&&(r.reverse=!0),n.attr(o+"clearifnotmatch")&&(r.clearIfNotMatch=!0),"true"===n.attr(o+"selectonfocus")&&(r.selectOnFocus=!0),a(n,i,r)?n.data("mask",new t(this,i,r)):void 0},a=function(t,n,a){a=a||{};var r=e(t).data("mask"),o=JSON.stringify,i=e(t).val()||e(t).text();try{return"function"==typeof n&&(n=n(i)),"object"!=typeof r||o(r.options)!==o(a)||r.mask!==n}catch(s){}},r=function(e){var n,t=document.createElement("div");return e="on"+e,n=e in t,n||(t.setAttribute(e,"return;"),n="function"==typeof t[e]),t=null,n};e.fn.mask=function(n,r){r=r||{};var o=this.selector,i=e.jMaskGlobals,s=i.watchInterval,c=r.watchInputs||i.watchInputs,l=function(){return a(this,n,r)?e(this).data("mask",new t(this,n,r)):void 0};return e(this).each(l),o&&""!==o&&c&&(clearInterval(e.maskWatchers[o]),e.maskWatchers[o]=setInterval(function(){e(document).find(o).each(l)},s)),this},e.fn.masked=function(e){return this.data("mask").getMaskedVal(e)},e.fn.unmask=function(){return clearInterval(e.maskWatchers[this.selector]),delete e.maskWatchers[this.selector],this.each(function(){var t=e(this).data("mask");t&&t.remove().removeData("mask")})},e.fn.cleanVal=function(){return this.data("mask").getCleanVal()},e.applyDataMask=function(t){t=t||e.jMaskGlobals.maskElements;var a=t instanceof e?t:e(t);a.filter(e.jMaskGlobals.dataMaskAttr).each(n)};var o={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:r("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};e.jMaskGlobals=e.jMaskGlobals||{},o=e.jMaskGlobals=e.extend(!0,{},o,e.jMaskGlobals),o.dataMask&&e.applyDataMask(),setInterval(function(){e.jMaskGlobals.watchDataMask&&e.applyDataMask()},o.watchInterval)},window.jQuery,window.Zepto);