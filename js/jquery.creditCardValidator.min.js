(function(){var t,n=[].indexOf||function(t){for(var n=0,e=this.length;e>n;n++)if(n in this&&this[n]===t)return n;return-1};t=jQuery,t.fn.validateCreditCard=function(e,i){var a,r,s,l,o,p,c,u,h,d,g,f,v;for(s=[{name:"amex",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club_carte_blanche",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club_international",pattern:/^36/,valid_length:[14]},{name:"jcb",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",pattern:/^4/,valid_length:[16]},{name:"master",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}],null==i&&(i={}),null==(f=i.accept)&&(i.accept=function(){var t,n,e;for(e=[],t=0,n=s.length;n>t;t++)a=s[t],e.push(a.name);return e}()),v=i.accept,d=0,g=v.length;g>d;d++)if(r=v[d],n.call(function(){var t,n,e;for(e=[],t=0,n=s.length;n>t;t++)a=s[t],e.push(a.name);return e}(),r)<0)throw"Credit card type '"+r+"' is not supported";return l=function(t){var e,l,o;for(o=function(){var t,e,r,l;for(l=[],t=0,e=s.length;e>t;t++)a=s[t],r=a.name,n.call(i.accept,r)>=0&&l.push(a);return l}(),e=0,l=o.length;l>e;e++)if(r=o[e],t.match(r.pattern))return r;return null},p=function(t){var n,e,i,a,r,s;for(i=0,s=t.split("").reverse(),e=a=0,r=s.length;r>a;e=++a)n=s[e],n=+n,e%2?(n*=2,i+=10>n?n:n-9):i+=n;return i%10===0},o=function(t,e){var i;return i=t.length,n.call(e.valid_length,i)>=0},h=function(t){var n,i;return r=l(t),i=!1,n=!1,null!=r&&(i=p(t),n=o(t,r)),e({card_type:r,luhn_valid:i,length_valid:n})},u=function(){var n;return n=c(t(this).val()),h(n)},c=function(t){return t.replace(/[ -]/g,"")},this.bind("input",function(){return t(this).unbind("keyup"),u.call(this)}),this.bind("keyup",function(){return u.call(this)}),0!==this.length&&u.call(this),this}}).call(this);